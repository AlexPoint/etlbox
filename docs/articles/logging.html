<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Logging Control Flow Tasks </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Logging Control Flow Tasks ">
    <meta name="generator" content="docfx 2.40.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="logging-control-flow-tasks">Logging Control Flow Tasks</h2>

<p>By default, ETLBox uses NLog. NLog already comes with different log targets that be configured either via your app.config or programatically. Please see the NLog-documentation for a full reference: (https://nlog-project.org/)[<a href="https://nlog-project.org/">https://nlog-project.org/</a>]</p>
<p>ETLBox already comes with NLog as dependency. So the needed packages will be retrieved from nuget. But in order to use it, you have to set up a nlog configuration section in your app.config, and create a target and a logger rule.</p>
<p>This could look like</p>
<pre><code class="lang-xml">&lt;nlog&gt;
  &lt;rules&gt;
    &lt;logger name=&quot;*&quot; minlevel=&quot;Debug&quot; writeTo=&quot;debugger&quot; /&gt;
  &lt;/rules&gt;
  &lt;targets&gt;
    &lt;target name=&quot;debugger&quot; xsi:type=&quot;Debugger&quot; /&gt;     
  &lt;/targets&gt;
&lt;/nlog&gt;
</code></pre><p>After adding this section, you will already get some logging output. </p>
<p>But there is more. If you want to have logging in your database, you can use the CreateLogTables - Task. This task will create two tables: etl.LoadProcess and etl.Log</p>
<p>The etl.LoadProcess contains information about the etl processes that you started programatically with the StartLoadProcessTask. To end or abort a process, you can use the EndLoadProcessTask or AbortLoadProcessTask.</p>
<p>The etl.Log table will store all log message generated from any control flow or data flow task. You can even use your own LogTask to create your own log message in there.</p>
<p>This is an example for using the logging</p>
<pre><code class="lang-C#">StartLoadProcessTask.Start(&quot;Process 1 started&quot;);

SqlTask.ExecuteNonQuery(&quot;some sql&quot;, &quot;Select 1 as test&quot;);
Sequence.Execute(&quot;some custom code&quot;, () =&gt; { });
LogTask.Warn(&quot;Some warning!&quot;);

EndLoadProcessTask.End(&quot;Process 1 ended successfully&quot;);
</code></pre><p>After running this code, you will one line with process information in your etl.LoadProcess Table and several lines of log information (for each task like SqlTask, Sequence or LogTask) in your etl.Log table.</p>
<p>Attention: Before running this code, you must configure a nlog target for your database. Please see the wiki for the complete example. </p>
<h3 id="create-log-tables">Create log tables</h3>
<pre><code class="lang-C#">CreateLogTablesTask.CreateLog();

CleanUpLogTask.Clean();
RemoveLogTablesTask
ReadLodProcessTableTask
ReadLogTableTask
GetLogAsJSONTask
</code></pre><h3 id="start--end-load-processes">Start / End load processes</h3>
<pre><code class="lang-C#">StartLoadProcessTask.Start(&quot;Process 1&quot;);
TransferCompletedForLoadProcessTask.Complete();
EndLoadProcessTask.End(&quot;Everything successful&quot;);
AbortLoadProcessTask.Abort()
</code></pre><h3 id="custom-log-message">Custom log message</h3>
<pre><code class="lang-C#">LogTask.Trace(&quot;Some text!&quot;);
LogTask.Debug(&quot;Some text!&quot;);
LogTask.Info(&quot;Some text!&quot;);
LogTask.Warn(&quot;Some text!&quot;);
LogTask.Error(&quot;Some text!&quot;);
LogTask.Fatal(&quot;Some text!&quot;);
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/roadrunnerlenny/etlbox/blob/master/ETLBoxDocu/articles/logging.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
